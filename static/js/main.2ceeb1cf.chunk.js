(this.webpackJsonpmustsee=this.webpackJsonpmustsee||[]).push([[0],{24:function(e,t,n){e.exports=n(43)},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(16),c=n.n(r),s=n(19),o=n(10),l=n(15),u=n(1),m=function(){return{type:"GET_FILMS_STARTED"}},p=function(e){return{type:"GET_FILMS_SUCCESS",payload:e}},d=function(){return{type:"GET_FILMS_FAIL"}},f=function(e){return{type:"SET_UNIQ_ID",payload:e}},b={searchLine:"",isSearching:!1,searchedFilms:[],error:!1,isInvisibleButtonAndShowLink:!1,alreadyClicked:!1,title:"\u041d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",movies:[],uniqID:null};var h=Object(l.b)({films:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_NAME_FILM":return Object(u.a)(Object(u.a)({},e),{},{searchLine:t.payload});case"GET_FILMS_STARTED":return Object(u.a)(Object(u.a)({},e),{},{isSearching:!0});case"GET_FILMS_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isSearching:!1,error:!1,movies:[],searchLine:"",searchedFilms:t.payload});case"GET_FILMS_FAIL":return Object(u.a)(Object(u.a)({},e),{},{isSearching:!1,error:!0,searchedFilms:[]});case"ADD_FILM_TO_LIST":var n=e.searchedFilms.slice(),a=(n=n.map((function(e){return e.imdbID===t.payload?Object(u.a)(Object(u.a)({},e),{},{disabled:!0}):e}))).find((function(e){return e.imdbID===t.payload}));return Object(u.a)(Object(u.a)({},e),{},{searchedFilms:n,movies:e.movies.concat(a)});case"INPUT_NAME_LIST_FILMS":return Object(u.a)(Object(u.a)({},e),{},{title:t.payload});case"DELETE_FILM_FROM_LIST":var i=e.movies.filter((function(e){return e.imdbID!==t.payload})),r=e.searchedFilms.map((function(e){return e.imdbID===t.payload?Object(u.a)(Object(u.a)({},e),{},{disabled:!1}):e}));return Object(u.a)(Object(u.a)({},e),{},{movies:i,searchedFilms:r});case"SET_UNIQ_ID":return Object(u.a)(Object(u.a)({},e),{},{uniqID:t.payload});case"INVISIBLE_BUTTON_TRUE":return Object(u.a)(Object(u.a)({},e),{},{isInvisibleButtonAndShowLink:!0});case"INVISIBLE_BUTTON_FALSE":return Object(u.a)(Object(u.a)({},e),{},{isInvisibleButtonAndShowLink:!1});case"INVISIBLE_BUTTON_FALSE":return Object(u.a)(Object(u.a)({},e),{},{alreadyClicked:!1});case"INVISIBLE_BUTTON_TRUE":return Object(u.a)(Object(u.a)({},e),{},{alreadyClicked:!0});default:return e}}}),v=n(23),_=Object(l.c)(h,Object(l.a)(v.a)),E=n(4),I=n(5),O=n(7),L=n(6),j=n(2),y=(n(32),n(33),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return i.a.createElement("header",{className:"header"},i.a.createElement("h1",{className:"header__title"},"MustSee.  On React-Redux"))}}]),n}(a.Component)),S=(n(34),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).searchLineChangeHandler=function(t){var n=t.target.value;e.props.inputNameFilm(n)},e.searchBoxSubmitHandler=function(t){t.preventDefault();var n=e.props.films.searchLine;e.props.getFilms(n)},e}return Object(I.a)(n,[{key:"render",value:function(){var e=this.props.films.searchLine;return i.a.createElement("div",{className:"search-box"},i.a.createElement("form",{className:"search-box__form",onSubmit:this.searchBoxSubmitHandler},i.a.createElement("label",{className:"search-box__form-label"},"\u0418\u0441\u043a\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e:",i.a.createElement("input",{value:e,type:"text",className:"search-box__form-input",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Godfather",onChange:this.searchLineChangeHandler})),i.a.createElement("button",{type:"submit",className:"search-box__form-submit",disabled:!e},"\u0418\u0441\u043a\u0430\u0442\u044c")))}}]),n}(a.Component)),N=Object(o.b)((function(e){return{films:e.films}}),(function(e){return{inputNameFilm:function(t){return e({type:"INPUT_NAME_FILM",payload:t})},getFilms:function(t){return e((n=t,function(e){e(m());var t=n.toLowerCase();fetch("//www.omdbapi.com/?s=".concat(t,"&apikey=6fa4c173")).then((function(e){return e.json()})).then((function(t){t.Search?e(p(t.Search)):e(d())})).catch((function(t){e(d())}))}));var n}}}))(S),T=(n(35),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleClick=function(){e.props.isInvisibleButtonAndShowLinkFALSE(),e.props.addToList(e.props.imdbID)},e}return Object(I.a)(n,[{key:"render",value:function(){var e=this.props,t=e.Title,n=e.Year,a=e.Poster,r=(e.addToList,e.imdbID,e.disabled);return i.a.createElement("article",{className:"movie-item"},i.a.createElement("img",{className:"movie-item__poster",src:"N/A"!==a?a:"https://via.placeholder.com/106x150.png?text=".concat(t),alt:t}),i.a.createElement("div",{className:"movie-item__info"},i.a.createElement("h3",{className:"movie-item__title"},t,"\xa0(",n,")"),i.a.createElement("button",{disabled:!!r,onClick:this.handleClick,type:"button",className:r?"movie-item__add-button disabled-button":"movie-item__add-button","disabled-button":!0},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a")))}}]),n}(a.Component)),g=Object(o.b)((function(){}),(function(e){return{addToList:function(t){return e(function(e){return{type:"ADD_FILM_TO_LIST",payload:e}}(t))},isInvisibleButtonAndShowLinkFALSE:function(){return e({type:"INVISIBLE_BUTTON_FALSE"})}}}))(T),k=(n(36),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=this.props.films,t=e.searchedFilms,n=e.error;return console.log(t),i.a.createElement("ul",{className:"movies"},0==t.length&&n?i.a.createElement("li",{className:"movies__item"},"\u0424\u0438\u043b\u044c\u043c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):t.map((function(e){return i.a.createElement("li",{className:"movies__item",key:e.imdbID},i.a.createElement(g,e))})))}}]),n}(a.Component)),F=Object(o.b)((function(e){return{films:e.films}}),(function(){}))(k),A=(n(37),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={alreadyClicked:!1},e.handleChange=function(t){var n=t.target.value;e.props.inputNameListFilms(n)},e.handleclick=function(){e.props.saveList();var t=e.props.films.movies.map((function(e){return e.imdbID})),n={title:e.props.films.title,movies:t};e.props.postRequestAndGetIdAfterSaveList(n),e.props.isInvisibleButtonAndShowLinkTRUE()},e.handleDelete=function(t,n){e.props.deleteFilmFromList(t),e.props.isInvisibleButtonAndShowLinkFALSE(),e.props.alreadyClickedFALSE()},e}return Object(I.a)(n,[{key:"render",value:function(){var e=this,t=this.props.films,n=t.title,a=t.movies,r=t.uniqID,c=t.isInvisibleButtonAndShowLink,s=t.alreadyClicked;return i.a.createElement("div",{className:"favorites"},i.a.createElement("input",{disabled:!!c,onChange:this.handleChange,value:n,className:"favorites__name"}),i.a.createElement("ul",{className:"favorites__list"},a.map((function(t){return i.a.createElement("li",{className:"list-item",key:t.imdbID},i.a.createElement("span",{onClick:function(){return e.handleDelete(t.imdbID,a)},className:"list-item__delete-button"},"X"),t.Title," (",t.Year,")")}))),c||s?a.length>0?i.a.createElement("a",{href:"/must-see/:".concat(r),target:"_blank",className:"link-to-another-page"},"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0444\u0438\u043b\u044c\u043c\u043e\u0432"):null:i.a.createElement("button",{onClick:this.handleclick,disabled:0===a.length,type:"button",className:"favorites__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"))}}]),n}(a.Component)),C=Object(o.b)((function(e){return{films:e.films}}),(function(e){return{inputNameListFilms:function(t){return e(function(e){return{type:"INPUT_NAME_LIST_FILMS",payload:e}}(t))},deleteFilmFromList:function(t){return e(function(e){return{type:"DELETE_FILM_FROM_LIST",payload:e}}(t))},saveList:function(){return e({type:"SAVE_LIST"})},postRequestAndGetIdAfterSaveList:function(t){return e(function(e){return function(t){fetch("https://acb-api.algoritmika.org/api/movies/list",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 id",e.id),t(f(e.id))}))}}(t))},isInvisibleButtonAndShowLinkTRUE:function(){return e({type:"INVISIBLE_BUTTON_TRUE"})},isInvisibleButtonAndShowLinkFALSE:function(){return e({type:"INVISIBLE_BUTTON_FALSE"})},alreadyClickedFALSE:function(){return e({type:"ALREADY_CLICKED_FALSE"})},alreadyClickedTRUE:function(){return e({type:"ALREADY_CLICKED_TRUE"})}}}))(A),D=function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"main-page"},i.a.createElement(y,null),i.a.createElement("main",{className:"main-page__content"},i.a.createElement("section",{className:"main-page__main-section"},i.a.createElement("div",{className:"main-page__search-box"},i.a.createElement(N,null)),i.a.createElement("div",{className:"main-page__movies"},i.a.createElement(F,null))),i.a.createElement("aside",{className:"main-page__favorites"},i.a.createElement(C,null))))}}]),n}(a.Component),w=(n(38),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={title:"\u041c\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",movies:[]},e}return Object(I.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t=t.split("").slice(1).join(""),console.log("\u0410\u0439\u0434\u0438\u0448\u043d\u0438\u043a \u0438\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",t),fetch("https://acb-api.algoritmika.org/api/movies/list/".concat(t)).then((function(e){return e.json()})).then((function(t){console.log("\u041e\u0442\u0432\u0435\u0442 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430",t),t.movies&&(e.setState({title:t.title}),t.movies.forEach((function(t){fetch("http://www.omdbapi.com/?i=".concat(t,"&apikey=6fa4c173")).then((function(e){return e.json()})).then((function(t){e.setState({movies:e.state.movies.concat(t)})}))})))}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"list-page"},i.a.createElement("h1",{className:"list-page__title"},this.state.title),i.a.createElement("ul",null,this.state.movies.map((function(e){return i.a.createElement("li",{className:"list-item-film",key:e.imdbID},i.a.createElement("img",{className:"list-item-poster",src:"N/A"!==e.Poster?e.Poster:"https://via.placeholder.com/300x400.png?text=".concat(e.Title),alt:"\u041f\u043e\u0441\u0442\u0435\u0440"}),i.a.createElement("a",{className:"link-to-imdb",href:"https://www.imdb.com/title/".concat(e.imdbID,"/"),target:"_blank"},e.Title," (",e.Year,")"))}))))}}]),n}(a.Component)),B=Object(o.b)((function(e){return{films:e.films}}),(function(){}))(w),M=(n(39),n(40),function(e){Object(O.a)(n,e);var t=Object(L.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"app"},i.a.createElement(j.a,{exact:!0,path:"/must-see",component:D}),i.a.createElement(j.a,{path:"/must-see/:id",exact:!0,component:B}))}}]),n}(i.a.Component));c.a.render(i.a.createElement(s.a,null,i.a.createElement(o.a,{store:_},i.a.createElement(M,null))),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.2ceeb1cf.chunk.js.map